# 设计高质量的React组件

  + 作为一个合格的开发者，不要只满足于编写出了可以运行的代码，而要了解代码背后的工作原理；不要只满足于自己编写的程序能够运行，还要让自己的代码可读而且易于维护。

  + "Bad programmers worry about the code. Good programmers worry about data structures and their relationships."  -- Linus Torvalds

  + React的class组件和function组件

    - src/click_counter.js

  + [构建高质量React组件的原则和方法](#构建高质量react组件的原则和方法)

## 构建高质量React组件的原则和方法

***

  + 易于维护组件的设计要素

    - 任何一个复杂的应用，都是由一个简单的应用发展而来的，当应用还很简单的时候，因为功能很少，可能只要一个组件就足够了，但是，随着功能的增加，把越来越多的功能放在一个组件中就会显得臃肿和难以管理。就和一个人最好一次只专注做一件事一样，也应该尽量保持一个组件只做一件事。当开发者发现一个组件功能太多代码量太大的时候，就要考虑拆分这个组件，用多个小的组件来代替。每个小的组件只关注实现单个功能，但是这些功能组合起来，也能满足复杂的实际需求。

    - “分而治之”的策略就是把问题分解为多个小问题，这样既容易解决也方便维护，虽然“分而治之”是一个好策略，但是不能滥用，只有必要的时候才去拆分组件，不然可能得不偿失。

    - 拆分组件最关键的就是确定组件的边界。

    - 作为软件设计的通则，组件的划分要满足高内聚（High Cohesion）和低耦合（Low Coupling）的原则。

      - 高内聚指的是把逻辑紧密相关的内容放在一个组件中。

      - 低耦合指的是不同组件之间的依赖关系要尽量弱化，也就是每个组件要尽量独立。

  + React组件的数据

    - React组件的数据分为两种，prop和state。prop是组件的对外接口，state是组件的内部状态。

  + React组件state和prop的局限

    - 考虑state的问题：如果多个组件中的状态有关联，即一个组件中的状态会影响到另一个组件中的状态。那么假设由于某种bug的原因，导致一个组件中状态已经发生改变，但是相关联的另一个组件中的状态并没有变化，应该如何处理？

    - 考虑prop的问题：如果在一个应用中，包含三级或者三级以上的组件结构，顶层的祖父级组件想要传递一个数据给最低层的子组件，用prop的方式，就只能通过父组件中转，然而父组件可能根本用不上这个prop。

    - 应该将数据源放在React组件之外形成全局状态，那么全部状态就是唯一可靠的数据源，让各个组件保持和全局状态的一致，这样更容易控制。
