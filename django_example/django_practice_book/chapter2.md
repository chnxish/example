# 框架基础和技术选型

  + 我们对需求进行了评审和分析，最终得到了具体要开发的功能点，并且对模块进行了划分。现在我们需要做的是，根据要开发的功能进行框架选择。

  + 针对不同的场景选择不同的技术架构，所产生的开发成本和维护成本都不一样。特定场景下合适的技术架构能够让开发人员更快速地开发系统，并且后期的维护成本也大大降低。相反，一个不合适的技术架构，会导致开发和维护成本大大增加。

  + 总结在技术选型时应该考虑的因素：

    - 所选语言/框架/数据库是否应用广泛，是否有比较好的社区支持以及大量的用户反馈。

    - 语言/框架/数据库所提供的能力（功能）是否能够契合业务的需要，从而减少重复造轮子的工作量。

    - 自己团队的成员是是否熟悉该框架和数据库，是否有人能够解决在框架使用中遇到的大部分问题。

  + [WSGI](#wsgi)

## WSGI

***

  + WSGI，全称是Web Server Gateway Interface（Web服务器网关接口）这是Python中定义的一个网关协议,规定了Web Server如何跟应用程序交互。Web Server可以理解为一个Web应用的容器，通过它可以启动应用，进而提供HTTP服务。而应用程序是指我们基于框架所开发的系统。

  + 这个协议最主要的目的就是保证在Python中所有Web Server程序或者说Gateway程序，能够通过统一的协议跟Web框架或者说Web应用进行交互。这对于部署Web程序来说很重要，你可以选择任何一个实现了WSGI协议的Web Server来跑你的程序。

  + 如果没有这个协议，那么每个程序、每个Web Server可能都会实现各自的接口，实现各自的“轮子”，最终的结果会是一团乱。使用统一协议的另外一个好处就是，Web应用框架只需要实现WSGI，就可以跟外部请求进行交互了，不用去针对某个Web Server来独立开发交互逻辑，开发者可以把精力放在框架本身。

  + 理解这一协议非常重要，因为在Python中大部分的Web框架都实现了此协议，也使用WSGI容器来进行部署。

  + ![Architecture](./resources/network_architecture.jpg "NetWork Architecture")

    - socket 其实就是操作系统提供给程序员操作<kbd>网络协议栈</kbd>的接口，说人话就是，你能通过socket 的接口，来控制协议找工作，从而实现网络通信，达到跨主机通信。

    - 协议栈的上半部分有两块，分别是负责收发数据的 TCP 和 UDP 协议，它们两会接受应用层的委托执行收发数据的操作。

    - 协议栈的下面一半是用 IP 协议控制网络包收发操作，在互联网上传数据时，数据会被切分成一块块的网络包，而将网络包发送给对方的操作就是由 IP 负责的。
 
  + WSGI协议分为两部分：

    - 其中一部分是Web Server或者Gateway，它监听在某个端口上接受外部的请求。

    - 另一部分是Web Application。

    - Web Server接受请求之后，会通过WSGI协议规定的方式把数据传递给Web Application，在Web Application中处理完之后，设置对应的状态和header，之后返回body部分。

    - Web Server拿到返回数据之后，进行HTTP协议的封装，最终返回完整的HTTP Response数据。

  + Django

    - 官网：djangoproject.com

    - 第三方插件：djangopackages.org

    - 基于Django的网站：djangosites.org
